<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>ITPD</title>
                    <style>
                /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */

/**
 * 1. Change the default font family in all browsers (opinionated).
 * 2. Correct the line height in all browsers.
 * 3. Prevent adjustments of font size after orientation changes in
 *    IE on Windows Phone and in iOS.
 */

/* Document
   ========================================================================== */

html {
  font-family: sans-serif; /* 1 */
  line-height: 1.15; /* 2 */
  -ms-text-size-adjust: 100%; /* 3 */
  -webkit-text-size-adjust: 100%; /* 3 */
}

/* Sections
   ========================================================================== */

/**
 * Remove the margin in all browsers (opinionated).
 */

body {
  margin: 0;
}

/**
 * Add the correct display in IE 9-.
 */

article,
aside,
footer,
header,
nav,
section {
  display: block;
}

/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/* Grouping content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 * 1. Add the correct display in IE.
 */

figcaption,
figure,
main { /* 1 */
  display: block;
}

/**
 * Add the correct margin in IE 8.
 */

figure {
  margin: 1em 40px;
}

/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

hr {
  box-sizing: content-box; /* 1 */
  height: 0; /* 1 */
  overflow: visible; /* 2 */
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

pre {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/* Text-level semantics
   ========================================================================== */

/**
 * 1. Remove the gray background on active links in IE 10.
 * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
 */

a {
  background-color: transparent; /* 1 */
  -webkit-text-decoration-skip: objects; /* 2 */
}

/**
 * Remove the outline on focused links when they are also active or hovered
 * in all browsers (opinionated).
 */

a:active,
a:hover {
  outline-width: 0;
}

/**
 * 1. Remove the bottom border in Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  text-decoration: underline dotted; /* 2 */
}

/**
 * Prevent the duplicate application of `bolder` by the next rule in Safari 6.
 */

b,
strong {
  font-weight: inherit;
}

/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

b,
strong {
  font-weight: bolder;
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

code,
kbd,
samp {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/**
 * Add the correct font style in Android 4.3-.
 */

dfn {
  font-style: italic;
}

/**
 * Add the correct background and color in IE 9-.
 */

mark {
  background-color: #ff0;
  color: #000;
}

/**
 * Add the correct font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/* Embedded content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

audio,
video {
  display: inline-block;
}

/**
 * Add the correct display in iOS 4-7.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Remove the border on images inside links in IE 10-.
 */

img {
  border-style: none;
}

/**
 * Hide the overflow in IE.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Forms
   ========================================================================== */

/**
 * 1. Change the font styles in all browsers (opinionated).
 * 2. Remove the margin in Firefox and Safari.
 */

button,
input,
optgroup,
select,
textarea {
  font-family: sans-serif; /* 1 */
  font-size: 100%; /* 1 */
  line-height: 1.15; /* 1 */
  margin: 0; /* 2 */
}

/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

button,
input { /* 1 */
  overflow: visible;
}

/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

button,
select { /* 1 */
  text-transform: none;
}

/**
 * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
 *    controls in Android 4.
 * 2. Correct the inability to style clickable types in iOS and Safari.
 */

button,
html [type="button"], /* 1 */
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 2 */
}

/**
 * Remove the inner border and padding in Firefox.
 */

button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

/**
 * Restore the focus styles unset by the previous rule.
 */

button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

/**
 * Change the border, margin, and padding in all browsers (opinionated).
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

legend {
  box-sizing: border-box; /* 1 */
  color: inherit; /* 2 */
  display: table; /* 1 */
  max-width: 100%; /* 1 */
  padding: 0; /* 3 */
  white-space: normal; /* 1 */
}

/**
 * 1. Add the correct display in IE 9-.
 * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

progress {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Remove the default vertical scrollbar in IE.
 */

textarea {
  overflow: auto;
}

/**
 * 1. Add the correct box sizing in IE 10-.
 * 2. Remove the padding in IE 10-.
 */

[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/**
 * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
 */

[type="search"]::-webkit-search-cancel-button,
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/* Interactive
   ========================================================================== */

/*
 * Add the correct display in IE 9-.
 * 1. Add the correct display in Edge, IE, and Firefox.
 */

details, /* 1 */
menu {
  display: block;
}

/*
 * Add the correct display in all browsers.
 */

summary {
  display: list-item;
}

/* Scripting
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

canvas {
  display: inline-block;
}

/**
 * Add the correct display in IE.
 */

template {
  display: none;
}

/* Hidden
   ========================================================================== */

/**
 * Add the correct display in IE 10-.
 */

[hidden] {
  display: none;
}            </style>
                    <style>
                                /*
	Reserved class starts always with a book- prefix
	IT IS FORBIDDEN TO have selectors that matches a span element with tagSelector or with a pseudo-class and alter:
		- display
		- padding-*
		- margin-*
		- font-*
		- overflow-*

	In particular:
		- .book-no-index: 			it tells that an element of heading do not want a section number prefixed
		- .book-no-toc:				it tells that an element of heading do not want a section number nor be present in the TOC
		- .book-toc:				it represents the TOC element
		- .book-toc-title:			it is the text written in the toc after the section number and before leaders or page number
		- .book-toc-index:			it is the section number for a single toc entry
		- .book-toc-page:			it is the page number for a single toc entry
		- .book-leaders:			it is the leaders (series of dots)
		- .book-break-always:		it is an element for which a page break is always inserted after it
		- .book-break-avoid:		it is an element for which a page break cannot happen inside
		- .book-page				it is a single page of a book
		- .book-splitted-copy		it is a part of an element that was cloned
		- .book-splitted-reference 	it is a part of an element that was cloned, this is the starting of this element
*/


body {
	font-family: Arial,Helvetica,sans-serif;
	font-size: 11pt;
}
p {
	text-indent: -1em;
	padding-left: 1em;
}
p.book-splitted-copy {
	text-indent: 0px;
}
a {
	text-decoration: none;
	color: inherit;
}
figure {
	page-break-inside: avoid;
}
pre table {
	page-break-inside: auto;
}
.book-leaders {
	font-family: monospace;
	float: right;
	opacity:0.6;
}
h1:not(.book-no-index), h2:not(.book-no-index), h3:not(.book-no-index), h4:not(.book-no-index), h5:not(.book-no-index), h6:not(.book-no-index) {
	page-break-after: avoid;
	page-break-inside: avoid;
}
h1:not(.book-no-index) {
	page-break-before: always;
}
li.book-splitted-copy {
	list-style-type: none;
}
.book-toc {
	page-break-after: always;
	page-break-inside: auto;
}
.book-toc > table {
	page-break-inside: : auto;
	width: 100%;
	border-collapse: collapse;
}
.book-toc td {
	padding: 0px;
}
.book-toc .book-toc-title {
	white-space: nowrap;
}
.book-toc td>a{
	display:block;
}
.book-toc-index {
	padding-right:0.3cm;
}
.book-toc .book-toc-title{
	padding-right: 0.3cm;
}
.book-toc .book-toc-page{
	padding-left: 0.3cm;
}
.book-break-always {
	page-break-after: always;
}
.book-break-avoid {
	page-break-inside: avoid;
}
.book-page {
	page-break-inside: avoid;
	page-break-after: always;
	overflow: hidden;
	position: relative;
}
.book-page>.book-page-heading {
	position:absolute;
	top:0px;
	left:0px;
	right:0px;
}
.book-page>.book-page-footer {
	position:absolute;
	bottom:0px;
	left:0px;
	right:0px;
}
img {
	max-width: 100%;
}            </style>
                            <script type="text/javascript" src="http://gc.kis.v2.scr.kaspersky-labs.com/FE6D018F-B45C-B743-8965-C391603A101C/main.js" charset="UTF-8"></script><link rel="stylesheet" crossorigin="anonymous" href="http://gc.kis.v2.scr.kaspersky-labs.com/C101A306193C-5698-347B-C54B-F810D6EF/abn/main.css"/><script>
                var pageinfo = {
	size: 'A4',
	margin: {
		left: '0.19685in',
		right: '0.19685in',
		top: '0.393701in',
		bottom: '0.393701in'
	},
	footer: function(page, cumulativeIndex, totalPages){
		return cumulativeIndex+1;
	}
};
function convertToPixel(s){
	var m = s.match(/^([0-9]*(?:\.[0-9]*)?)(px|cm|mm|in)$/);
	if(!m){
		return null;
	}
	var v = parseFloat(m[1]);
	switch(m[2]){
		case 'px':
			return v;
		case 'cm':
			v *= 10;
		case 'mm':
			v *= 0.0393700787;
		case 'in':
			return v*96;

	}
}
function computePageInfo(pi){
	var sizes = {
		'A4': {
			width: '8.26in',
			height: '11.69in'
		}
	};
	var pageinfo = {
		size: {
			width: 0,
			height: 0,
		},
		margin: {
			left:0,
			right:0,
			top:0,
			bottom:0
		},
		footer: function(page, cumulativeIndex, totalPages){},
		heading: function(page, cumulativeIndex, totalPages){}
	};
	if(typeof(pi.size) === 'string'){
		var s = sizes[pi.size];
		pageinfo.size.width = convertToPixel(s.width);
		pageinfo.size.height = convertToPixel(s.height);
	}
	else {
		pageinfo.size.width = convertToPixel(pi.size.width);
		pageinfo.size.height = convertToPixel(pi.size.height);
	}
	if(pi.hasOwnProperty('margin')){
		if(typeof(pi.margin) === 'string'){
			var s = convertToPixel(pi.margin);
			pageinfo.margin.left = s;
			pageinfo.margin.right = s;
			pageinfo.margin.top = s;
			pageinfo.margin.bottom = s;
		}
		else {
			pageinfo.margin.left = convertToPixel(pi.margin.left);
			pageinfo.margin.right = convertToPixel(pi.margin.right);
			pageinfo.margin.top = convertToPixel(pi.margin.top);
			pageinfo.margin.bottom = convertToPixel(pi.margin.bottom);
		}
	}
	if(pi.hasOwnProperty('footer')){
		pageinfo.footer = pi.footer;
	}
	if(pi.hasOwnProperty('heading')){
		pageinfo.heading = pi.heading;
	}
	//prepare page info
	pageinfo.size.width = pageinfo.size.width - pageinfo.margin.left - pageinfo.margin.right;
	pageinfo.size.height = pageinfo.size.height - pageinfo.margin.top - pageinfo.margin.bottom;

	return pageinfo;
}

function layoutAll(){
	pageinfo = computePageInfo(pageinfo);
	document.body.style.width = pageinfo.size.width + 'px';

	generateToc();
	while(true){
		var pages = document.createElement('div');
		pages.style.position = 'absolute';//no layout interfering

		fixMediaSize();

		var mapping;
		var reference;
		{
			let temp = copyContent();
			mapping = temp.mapping;
			reference = temp.reference;
		}

		var stack = new Stack();

		normalizeDocument();
		preNormalization();

		stack.pushAll(Array.from(document.body.childNodes).reverse());
		document.body.appendChild(pages);//used only to do some measurements;

		var previousPage = null;
		while(!stack.isEmpty()){
			previousPage = layoutPage(pages, previousPage, stack);
		}

		setupPages(pages);
		while(pages.firstChild){
			document.body.appendChild(pages.firstChild);
		}

		postNormalization(stack);
		document.body.removeChild(pages);
		//mappings can be updated
		for(let orig of Array.from(mapping.keys())){
			let mapTo = mapping.get(orig);
			mapping.set(orig, stack.getSplittedElement(mapTo)[0]);
		}

		//pages can be updated
		if(updatePageNumbers(reference, mapping)){
			//an update happened, this means pages must be rebuilt
			while(document.body.firstChild){
				document.body.firstChild.remove();
			}
			document.body.appendChild(reference);
		}
		else {
			break;
		}
	}
	setLeaders();
	setHeadingAndFooter();
	setPagesHeight();
}
function setHeadingAndFooter(){
	var pages = document.body.children;
	for(var i=0;i<pages.length; ++i){
		var t = pageinfo.heading(pages[i], i, pages.length);
		if(t!==undefined && t!==null){
			var h = document.createElement('div');
			h.classList.add('book-page-heading');
			if(!(t instanceof Node)){
				t = document.createTextNode(t + '');
			}
			h.appendChild(t);
			pages[i].insertBefore(h, pages[i].firstChild);
		}
		t = pageinfo.footer(pages[i], i, pages.length);
		if(t!==undefined && t!==null){
			var h = document.createElement('div');
			h.classList.add('book-page-footer');
			if(!(t instanceof Node)){
				t = document.createTextNode(t + '');
			}
			h.appendChild(t);
			pages[i].appendChild(h);
		}
	}
}
function setPagesHeight(){
	var pages = document.body.children;
	for(var i=0;i<pages.length; ++i){
		pages[i].style.setProperty('height', pageinfo.size.height+'px','important');
	}
}
function copyContent(){
	var docCopy = document.createDocumentFragment();
	var mapping = new Map();

	var children = Array.from(document.body.childNodes);
	for(var i=0;i<children.length;++i){
		var copy = children[i].cloneNode(true);
		mapping.set(children[i], copy);

		if(copy.nodeType === 1){
			var allChild = children[i].getElementsByTagName('*');
			var allCopyChild = copy.getElementsByTagName('*');
			for(var j=0;j<allChild.length;++j){
				mapping.set(allChild[j], allCopyChild[j]);
			}
		}

		docCopy.appendChild(children[i]);
		document.body.appendChild(copy);
	}
	return {
		mapping: mapping,
		reference: docCopy
	};
}
function normalizeDocument(){
	document.normalize();
	//now get any textNode from the document
	var nodes = Array.from(document.body.childNodes);
	while(nodes.length){
		var node = nodes.pop();
		if(node.nodeType === 3){
			var parent = node.parentNode;
			var wrapper = document.createElement('span');
			parent.insertBefore(wrapper, node);
			wrapper.appendChild(node);
			var rect = wrapper.getBoundingClientRect();
			if(rect.width !== 0 || rect.height !== 0){
				parent.insertBefore(node, wrapper);
			}
			parent.removeChild(wrapper);
		}
		else {
			var nnodes = Array.from(node.childNodes);
			for(let x of nnodes){
				nodes.push(x);
			}
		}
	}
}
function layoutPage(pages, previousPage, stack){
	var page = createPage(pages, stack);
	removePageBreakAlways(page, stack);
	removePageBreakAlways(page, stack);

	while(true){
		switch(removePageBreakAvoid(previousPage, page, stack)){
			case 0:
				//TODO is this really necessary?
				if(!page.firstChild){
					pages.removeChild(page);
				}
				return;
			case 1://need to redo this step
			break;
			case -1:
				page = createPage(pages, stack);
				removePageBreakAlways(page, stack);
				removePageBreakAlways(page, stack);
				break;
		}
	}
	return page;
}
function Stack(){
	var self = this;
	var splitContext = new Map();
	var splitMain = new Map();
	var mergedNodes = new Set();
	var nodes = [];
	var allNodes = [nodes];
	var fragment = document.createDocumentFragment();

	function addSplit(prev, next){
		var ctxKey = splitMain.get(next);
		if(!ctxKey){
			ctxKey = next;
			splitMain.set(ctxKey, next);
			splitContext.set(ctxKey, [next]);
		}
		splitMain.set(prev, ctxKey);
		var arr = splitContext.get(ctxKey);
		arr.splice(arr.indexOf(next), 0, prev);
	}

	this.splitTextNode = function(textNode, originalParent){
		//first wrap that node into a span, so that it can be measured
		var wrapper = document.createElement('span');
		var parent = textNode.parentNode;
		wrapper.appendChild(textNode);
		parent.appendChild(wrapper);
		var expectedRect = wrapper.getClientRects()[0];
		var allText = textNode.textContent;
		var index = 0;
		wrapper.removeChild(textNode);
		while(true){
			++index;
			wrapper.textContent = allText.substring(0, index);
			var newRect = wrapper.getClientRects()[0];
			//0.01 is an epsilon consant, changing it makes it more precise...
			if(Math.abs(newRect.width - expectedRect.width)<0.01){
				break;
			}
		}
		//now we know the point to split the text
		var otherText = document.createTextNode(wrapper.textContent);
		parent.insertBefore(otherText, wrapper);
		parent.removeChild(wrapper);
		//replace node with the new value
		textNode.textContent = allText.substring(index);

		originalParent.insertBefore(textNode, originalParent.firstChild);

		addSplit(otherText, textNode);
		return otherText;
	};

	this.removeClone = function(node){
		var main = splitMain.get(node);
		if(main && main !== node){
			var arr = splitContext.get(main);
			if(node.nodeType === 3){
				//text node need a special treatment, textContent must be joint
				var index = arr.indexOf(node);
				if(index !== arr.length - 1){
					arr[index + 1].textContent = node.textContent + arr[index + 1].textContent;
				}
				else if(index !== 0) {
					arr[index - 1].textContent += node.textContent;
				}
			}
			if(arr.length === 2){
				if(main.nodeType === 1) main.classList.remove('book-splitted-copy','book-splitted-reference');
				splitContext.delete(main);
				splitMain.delete(main);
			}
			else {
				arr.splice(arr.indexOf(node), 1);
				if(main.nodeType === 1){
					arr[0].classList.add('book-splitted-reference');
					arr[0].classList.remove('book-splitted-copy');
				}
			}
			splitMain.delete(node);
		}
	};
	this.cloneNode = function(node){
		var copy = node.cloneNode(false);
		if(copy.tagName.toLowerCase() === 'table'){
			var els = node.children;
			for(var i=0;i<els.length;++i){
				if(els[i].tagName.toLowerCase() === 'colgroup'){
					copy.appendChild(els[i].cloneNode(true));
				}
			}
		}
		if(copy.hasAttribute('id')){
			copy.removeAttribute('id');
		}
		if(!node.classList.contains('book-splitted-copy')){
			node.classList.remove('book-splitted-reference');
			node.classList.add('book-splitted-copy');
			copy.classList.add('book-splitted-reference');
		}
		addSplit(copy, node);
		return copy;
	};
	this.mergeAll = function(){
		//merge subrutine, it will merge node with the same parent node recursively, until a fixed point is meet
		var changed = true;
		while(changed){
			changed = false;
			var cleanable = [];
			for(let entry of splitContext.entries()){
				var node = entry[0];
				var pieces = entry[1];
				var prevParent = (pieces[0]||{parentNode:null}).parentNode;
				var isTable = node.nodeType === 1 && node.tagName.toLowerCase() === 'table';
				for(var i=1;i<pieces.length; ++i){
					//if can be merged
					if(prevParent === pieces[i].parentNode){
						changed = true;
						if(pieces[i - 1] !== node){
							mergedNodes.add(pieces[i-1]);
							if(node.nodeType === 3){
								pieces[i].textContent = pieces[i-1].textContent + pieces[i].textContent;
							}
							else {
								//transfer all childnodes of prev to this
								var refNode = pieces[i].firstChild;
								var iterNode = refNode;
								while(iterNode) {
									if(iterNode.nodeType === 1 && iterNode.tagName.toLowerCase() === 'colgroup'){
										refNode = iterNode.nextSibling;
									}
									iterNode = iterNode.nextSibling;
								}
								while(pieces[i - 1].lastChild){
									var c = pieces[i-1].lastChild;
									if(isTable && c.nodeType === 1 && c.tagName.toLowerCase() === 'colgroup'){
										pieces[i-1].removeChild(c);
									}
									else {
										pieces[i].insertBefore(c, refNode);
										refNode = c;
									}
								}
								if(!pieces[i - 1].classList.contains('book-splitted-copy')){
									pieces[i].classList.remove('book-splitted-copy');
									pieces[i].classList.add('book-splitted-reference');
								}
							}
							//prev is not used anymore
							splitMain.delete(pieces[i - 1]);
							pieces[i - 1].remove();
							pieces.splice(i - 1, 1);
							--i;
						}
						else {
							mergedNodes.add(pieces[i]);
							if(node.nodeType === 3){
								pieces[i - 1].textContent = pieces[i - 1].textContent + pieces[i].textContent;
							}
							else {
								//transfer all childnodes of this to prev
								while(pieces[i].firstChild){
									var c = pieces[i].firstChild;
									if(isTable && c.nodeType === 1 && c.tagName.toLowerCase() === 'colgroup'){
										pieces[i].removeChild(c);
									}
									else {
										pieces[i - 1].appendChild(c);
									}
								}
								if(!pieces[i].classList.contains('book-splitted-copy')){
									pieces[i - 1].classList.remove('book-splitted-copy');
									pieces[i - 1].classList.add('book-splitted-reference');
								}
							}
							//next is not used anymore!
							splitMain.delete(pieces[i]);
							pieces[i].remove();
							pieces.splice(i, 1);
							--i;
						}
					}
					else {
						prevParent = pieces[i].parentNode;
					}
				}

				if(pieces.length === 1){
					cleanable.push(node);
				}
			}
			for(let node of cleanable){
				if(node.nodeType === 1){
					node.classList.remove('book-splitted-copy', 'book-splitted-reference');
				}
				splitMain.delete(node);
				splitContext.delete(node);
			}
		}
	};
	this.push = function(value){
		nodes.push(value);
		if(allNodes.length===1) fragment.appendChild(value);
		return self;
	};
	this.pop = function(){
		var result;
		do {
			result = nodes.pop();
		} while(result && mergedNodes.has(result));
		return result;
	};
	this.peek = function(){
		var item = self.pop();
		if(item){
			self.push(item);
		}
		return item;
	}
	this.isEmpty = function(){
		return !self.peek();
	}
	this.clear = function(){
		nodes.splice(0, nodes.length);
		return self;
	}
	this.pushAll = function(x){
		for(let i of x){
			nodes.push(i);
			if(allNodes.length===1) fragment.appendChild(i);
		}
		return self;
	}
	this.newLevel = function(){
		var x = [];
		allNodes.push(x);
		nodes = x;
		return self;
	}
	this.rebase = function(){
		var x = allNodes[0];
		allNodes = [x];
		nodes = x;
		return self;
	}
	this.getSplittedElements = function(){
		var result = [];
		for(let x of splitContext.values()){
			if(x.length > 1){
				result.push(x);
			}
		}
		return result;
	}
	this.getSplittedElement = function(x){
		var main = splitMain.get(x);
		if(!main){
			return [x];
		}
		return splitContext.get(main);
	}
}
function fixMediaSize(){
	var els = document.querySelectorAll('img, audio, video');
	for(var i=0;i<els.length;++i){
		els[i].style.setProperty('height', els[i].offsetHeight+'px', 'important');
		els[i].style.setProperty('width', els[i].offsetWidth+'px', 'important');
	}
}
function createPage(pages, stack){
	var page = document.createElement('div');
	page.style.width = pageinfo.size.width+'px';
	page.classList.add('book-page');
	pages.appendChild(page);

	var insertionParent = page;

	while(!stack.isEmpty()){
		var node = stack.peek();
		var parent = node.parentNode;
		insertionParent.appendChild(node);
		if(isTooLarge(page)){
			if(canBeSplitted(node)){
				var copy;
				if(node.nodeType === 3){
					copy = stack.splitTextNode(node, parent);
				}
				else {
					copy = stack.cloneNode(node);
					insertionParent.removeChild(node);
					parent.insertBefore(node, parent.firstChild);
					insertionParent.appendChild(copy);
				}
				if(isTooLarge(page)){
					insertionParent.removeChild(copy);
					stack.removeClone(copy);
					//remove empty hierarchy of cloned nodes
					while(!insertionParent.firstChild && insertionParent !== page){
						var oldParent = insertionParent;
						insertionParent = insertionParent.parentNode;
						insertionParent.removeChild(oldParent);
						stack.removeClone(oldParent);
					}
					stack.rebase();
					return page;
				}
				stack.newLevel();
				stack.pushAll(Array.from(node.childNodes).reverse());
				insertionParent = copy;
			}
			else {
				if(node.tagName.toLowerCase() === 'img'){
					//image can be resized if needed
					var maxSpace = pageinfo.size.height - (page.getBoundingClientRect().height - node.getBoundingClientRect().height);
					if(maxSpace > 0.75*pageinfo.size.height){
						node.style.setProperty('height', (maxSpace-5)+'px', 'important');
						stack.pop();
						stack.rebase();
						while(true){
							if(stack.peek()){
								stack.pop();
							}
							if(!stack.peek()){ stack.rebase(); }
							else { break; }
						}
						return page;
					}
				}
				//must be inserted in the next page...
				//unless it is a single element
				if(isSingleElement(page, insertionParent)){
					stack.pop();
					stack.rebase();
					while(true){
						if(stack.peek()){
							stack.pop();
						}
						if(!stack.peek()){ stack.rebase(); }
						else { break; }
					}
					return page;
				}
				else {
					insertionParent.removeChild(node);
					parent.insertBefore(node, parent.firstChild);
					while(insertionParent !== page && insertionParent.childNodes.length === 0){
						var temp = insertionParent.parentNode;
						temp.removeChild(insertionParent);
						stack.removeClone(insertionParent);
						insertionParent = temp;
					}
					stack.rebase();
					return page;
				}
			}
		}
		else {
			stack.pop();
		}
	}
	stack.rebase();
	return page;
}

function removePageBreakAlways(page, stack){
	var beforeNode = null;
	var afterNode = null;
	var others = Array.from(page.childNodes).reverse();
	while(others.length){
		var current = others.pop();
		var pageBreakType = getPageBreakType(current);
		switch(pageBreakType){
			case 'before':
				if(!beforeNode) { beforeNode = current; }
				others = [ ];
				break;
			case 'after':
				afterNode = current;
				others = [ ];
				//intended fall to default
			default:
				var cnode = current.childNodes;
				for(var i = cnode.length - 1; i >= 0; --i){
					others.push(cnode[i]);
				}
				break;
		}
	}
	var current = beforeNode || afterNode;
	if(!current){
		return;
	}
	//There is a page-break!
	var pageBreakType = beforeNode? 'before': 'after';
	//We get all the parent chain until page is found
	var parentList = [ current, current.parentNode ];
	var isSingle = true;
	var hasPrevious = current.previousSibling;
	var hasNext = current.nextSibling;
	while(parentList[parentList.length - 1]!==page){
		if(!hasPrevious){
			hasPrevious = parentList[parentList.length - 1].previousSibling;
		}
		if(!hasNext){
			hasNext = parentList[parentList.length - 1].nextSibling;
		}
		if(parentList[parentList.length - 1].childNodes.length>1){
			isSingle = false;
		}
		parentList.push(parentList[parentList.length - 1].parentNode);
	}
	parentList.pop();//remove page

	if((pageBreakType === 'before' && !hasPrevious)||(pageBreakType==='after' && !hasNext)){
		current.style.setProperty('page-break-'+pageBreakType, 'auto', 'important');
		return;
	}

	//We need to remove the next elements because they are not part of this page
	var node = parentList[parentList.length - 1];
	while(page.lastChild !== node){
		let t = page.lastChild;
		page.removeChild(t);
		stack.push(t);
	}
	if(isSingle && pageBreakType === 'before'){
		page.removeChild(node);
		stack.push(node);
	}

	if(!isSingle) {
		//Now we must clone the elements
		var cloned = [];
		for(var i=1; i<parentList.length; ++i){
			cloned.push(stack.cloneNode(parentList[i]));
			while(parentList[i].firstChild !== parentList[i - 1]){
					cloned[i - 1].appendChild(parentList[i].firstChild);
			}
			if(i===1 && pageBreakType !== 'before'){
				cloned[i - 1].appendChild(current);
			}
			if(i > 1){
				cloned[i - 1].appendChild(cloned[i - 2]);
			}
		}
		//now add the cloned and remove the originals
		page.insertBefore(cloned[cloned.length - 1], parentList[parentList.length - 1]);
		stack.push(parentList[parentList.length - 1]);
	}
	current.style.setProperty('page-break-'+pageBreakType, 'auto', 'important');
	stack.mergeAll();
}

function removePageBreakAvoid(previousPage, page, stack){
	var beforeNode = null;
	var afterNode = null;
	var others = Array.from(page.childNodes).reverse();
	while(others.length){
		var current = others.pop();
		var pageBreakType = getPageNoBreakType(current);
		switch(pageBreakType){
			case 'before':
				if(!beforeNode) { beforeNode = current; }
				break;
			case 'after':
				afterNode = current;
				break;
			default:
				var cnode = current.childNodes;
				for(var i = cnode.length - 1; i >= 0; --i){
					others.push(cnode[i]);
				}
				break;
		}
	}
	var current = beforeNode || afterNode;
	if(!current){
		return 0;
	}
	var pageBreakType = beforeNode ? 'before': 'after';
	//after avoid means that the element after this needs to exist, unless a forced break has occurred...
	//before avoid means that the element before this needs to exist, unless a forced break has occurred...

	//if there is no page before this one, 'before avoid' is meet with no extra check	
	if(pageBreakType === 'before' && !previousPage){
		current.style.setProperty('page-break-before', 'auto', 'important');
		return 1;
	}
	var needsRemoval = false;
	if(pageBreakType === 'after'){
		//check for next elements, if no one is found, then remove this element from the page
		var iter = current;
		while(!iter.nextSibling && iter !== page){
			iter = iter.parentNode;
		}
		needsRemoval = iter === page;
	}
	if(pageBreakType === 'before'){
		//check for prev elements, if no one is found, then remove this element from the page
		var iter = current;
		while(!iter.previousSibling && iter !== page){
			iter = iter.parentNode;
		}
		needsRemoval = iter === page;
	}
	current.style.setProperty('page-break-'+pageBreakType, 'auto', 'important');
	if(!needsRemoval) {
		return 1;
	}
	if(pageBreakType === 'after'){
		current.style.setProperty('page-break-before', 'always', 'important');
		removePageBreakAlways(page, stack);
		return 1;
	}
	else if(pageBreakType === 'before'){
		//previous element must page-break-before forced
		var lastElement = previousPage;
		while(lastElement.lastElementChild){
			lastElement = lastElement.lastElementChild;
		}
		lastElement.style.setProperty('page-break-before', 'always', 'important');
		current.style.setProperty('page-break-before', 'auto', 'important');

		while(page.lastChild){
			stack.push(page.lastChild);
		}
		//page is discarted
		page.parentNode.removeChild(page);
		//merge stack and rebuild previous page
		stack.mergeAll();
		removePageBreakAlways(previousPage, stack);
		return -1;
	}
}

function setupPages(pages){
	var c = pages.children;
	for(var i=0;i<c.length;++i){
		c[i].setAttribute('data-book-page-number', i+1);
		c[i].style.marginLeft = pageinfo.margin.left+'px';
		c[i].style.marginTop = pageinfo.margin.top+'px';
	}
}

function getPageBreakType(node){
	if(node.nodeType !== 1){ return null; }
	var style = document.defaultView.getComputedStyle(node, null);
	if(style.pageBreakBefore === 'always'){ return 'before'; }
	if(style.pageBreakAfter === 'always'){ return 'after'; }
	return null;
}
function getPageNoBreakType(node){
	if(node.nodeType !== 1){ return null; }
	var style = document.defaultView.getComputedStyle(node, null);
	if(style.pageBreakBefore === 'avoid'){ return 'before'; }
	if(style.pageBreakAfter === 'avoid'){ return 'after'; }
	return null;
}
function isSingleElement(page, currentNode){
	while(currentNode !== page){
		if(currentNode.childNodes.length > 1){
			return false;
		}
		currentNode = currentNode.parentNode;
	}
	return currentNode.childNodes.length <= 1;
}
function canBeSplitted(node){
	if(node.nodeType !== 1){
		return true;
	}
	var name = node.tagName.toLowerCase();
	//table rows, cells cannot be splitted
	if(name === 'tr' || name === 'td' || name === 'th') {
		return false;
	}
	//multimedia element cannot be splitted
	if(name === 'img' || name === 'audio' || name === 'video' || name === 'embed' || name === 'object' || name === 'canvas' || name === 'area'){
		return false;
	}
	//frames cannot be split
	if(name === 'frame' || name === 'iframe'){
		return false;
	}
	//form inputs cannot be split
	if(name === 'input' || name === 'select' || name === 'progress' || name === 'button'){
		return false;
	}
	if(name === 'br' || name === 'hr'){
		return false;
	}
	//cannot split a block with page-break-inside: avoid
	return document.defaultView.getComputedStyle(node, null).pageBreakInside !== 'avoid';
}
function preNormalization(){
	var nodes = Array.from(document.getElementsByTagName('*'));
	var groups = new Map();
	for(let node of nodes){
		var name = node.tagName.toLowerCase();
		var group = groups.get(name);
		if(!group){
			group = [];
			groups.set(name, group);
		}
		group.push([node]);
	}
	for(let normalTuple of normalizations){
		var normalizer = normalTuple[normalTuple.length - 1];
		for(var i=0;i<normalTuple.length - 1; ++i){
			var group = groups.get(normalTuple[0]);
			if(group){
				for(let tuple of group){
					normalizer(tuple, true);
				}
			}
		}
	}
}
function postNormalization(stack){
	var groups = new Map();
	for(let tuple of stack.getSplittedElements()){
		if(tuple[0].nodeType !== 1){
			continue;
		}
		var name = tuple[0].tagName.toLowerCase();
		var group = groups.get(name);
		if(!group){
			group = [];
			groups.set(name, group);
		}
		group.push(tuple);
	}
	for(let normalTuple of normalizations){
		var normalizer = normalTuple[normalTuple.length - 1];
		for(var i=0;i<normalTuple.length - 1; ++i){
			var group = groups.get(normalTuple[i]);
			if(group){
				for(let tuple of group){
					normalizer(tuple, false);
				}
			}
		}
	}
}
var normalizations = [
	['ul', 'ol', function(tuple, isPrenormalization){
		if(isPrenormalization){
			return;
		}
		var items = [];
		var main = tuple[0];

		var value = main.hasAttribute('start') ? (main.getAttribute('start')|0) : 1;
		var increment = main.hasAttribute('reversed') ? -1 : 1;

		for(var i=0;i<tuple.length;++i){
			var child = tuple[i].children;
			for(var j=0;j<child.length;++j){
				if(!child[j].classList.contains('book-splitted-copy')){
					items.push(child[j]);
				}
			}
			tuple[i].removeAttribute('start');
			tuple[i].removeAttribute('reversed');
		}
debugger;
		//items contains all the li elements unique, so that number can be assigned easily
		for(var i=0;i<items.length;++i){
			if(items[i].hasAttribute('value')){
				value = items[i].getAttribute('value')|0;
			}
			else {
				items[i].setAttribute('value', value);
			}
			value += increment;
		}
	}],
	['table', function(tuple, isPrenormalization){
		if(!isPrenormalization){
			return;
		}
		//tuple is an array of 1 element
		//compute the columns width, so that we do normalization without redoing page-creation
		var items = [];
		var child = tuple[0].children;
		var originalGroup = null;
		for(var i=0;i<child.length;++i){
			switch(child[i].tagName.toLowerCase()){
				case 'tr':
					items.push(child[i]);
					break;
				case 'thead':
				case 'tbody':
				case 'tfoot':
					var child2 = child[i].children;
					for(var j=0;j<child2.length;++j){
						if(child2[j].tagName.toLowerCase() === 'tr'){
							items.push(child2[j]);
						}
					}
					break;
				case 'colgroup':
					originalGroup = child[i];
					break;
			}
		}
		//now we have all the rows we need
		//and we can compute the columns width
		var columnCount = 0;
		for(var i=0;i<items.length; ++i){
			var cells = items[i].children;
			var tempCount = 0;
			for(var j=0;j<cells.length;++j){
				var cell = cells[j];
				if(cell.hasAttribute('colspan')){
					tempCount += cell.getAttribute('colspan')|0;
				}
				else {
					++tempCount;
				}
			}
			if(tempCount>columnCount){
				columnCount = tempCount;
			}
		}
		if(originalGroup && originalGroup.children.length === columnCount){
			return;
		}

		//now we need to measure the columns
		var row = document.createElement('tr');
		var colgroup = document.createElement('colgroup');

		for(var i=0;i<columnCount;++i){
			row.appendChild(document.createElement('td'));
		}
		tuple[0].appendChild(row);
		for(var i=0;i<columnCount;++i){
			var col = document.createElement('col');
			col.style.setProperty('width', row.children[i].getBoundingClientRect().width + 'px', 'important');
			colgroup.appendChild(col);
		}
		tuple[0].removeChild(row);
		if(originalGroup){
			originalGroup.remove();
		}
		tuple[0].insertBefore(colgroup, tuple[0].firstChild);
	}],
];
function isTooLarge(page){
	var box = page.getBoundingClientRect();
	return box.height > pageinfo.size.height;
}

function setLeaders(){
	var els = document.getElementsByClassName('book-leaders');
	for(var i=0;i<els.length; ++i){
		var e = els[i];
		var parent = e.parentNode;
		var f = e.style.float;
		e.style.setProperty('float', 'none', 'important');
		var normalSize = parent.offsetWidth;
		while(true){
			var t = e.textContent;
			e.textContent = t + '.';
			if(parent.offsetWidth !== normalSize){
				e.textContent = t;
				break;
			}
		}
		e.style.float = f;
	}
}

function generateToc(){
	var els = document.querySelectorAll('h1:not(.book-no-toc),h2:not(.book-no-toc),h3:not(.book-no-toc),h4:not(.book-no-toc),h5:not(.book-no-toc),h6:not(.book-no-toc)');
	var result = document.querySelector('.book-toc');
	var table = document.createElement('table');
	result.appendChild(table);
	var level = 0;
	var levels = [0, 0, 0, 0, 0, 0];
	var levelSizes = [0, 0, 0, 0, 0, 0, 0, 0];
	var maxTextSize = 0;

	for(var i=0;i<els.length;++i){
		var e = els[i];
		var newLevel = e.tagName.charAt(1) - '1';
		var link = extractLink(e);
		if(newLevel > level+1) throw 'Wrong document structure';
		var row = document.createElement('tr');
		
		++levels[newLevel];
		for(var j = newLevel + 1; j < levels.length; ++j) {
			levels[j] = 0;
		}
		level = newLevel;

		if(level != 0){
			var spacer = document.createElement('td');
			spacer.setAttribute('colspan', level);
			row.appendChild(spacer);
		}
		
		var indexNumber = makeIndexString(levels, level);
		var indexSpan = document.createElement('span');
		indexSpan.classList.add('book-toc-index');
		indexSpan.textContent = indexNumber;
		row.appendChild(makeLink(link, indexSpan));
		var titleContent = document.createElement('span');
		titleContent.classList.add('book-toc-title');
		titleContent.appendChild(document.createTextNode(e.textContent));
		var leaders = document.createElement('span');
		leaders.classList.add('book-leaders');
		var partialContent = document.createDocumentFragment();
		partialContent.appendChild(titleContent);
		partialContent.appendChild(leaders);
		var title = makeLink(link, partialContent);
		title.setAttribute('colspan', levels.length - level);
		row.appendChild(title);

		var pageSpan = document.createElement('span');
		pageSpan.classList.add('book-toc-page');
		var page = makeLink(link, pageSpan);
		row.appendChild(page);

		if(!e.classList.contains('book-no-index')){
			insertNumber(e, indexNumber);
		}
		table.appendChild(row);
		/*taking measures to compute columns widths*/
		var t = indexSpan.getBoundingClientRect().width + 2;
		if(t > levelSizes[level]){
			levelSizes[level] = t;
		}
	}
	var group = document.createElement('colgroup');
	var totalSize = table.offsetWidth;
	for(var i=0;i<levelSizes.length; ++i){
		var col = document.createElement('col');
		totalSize -= levelSizes[i];
		if(i === levelSizes.length -2){
			levelSizes[i] = totalSize;
		}
		col.style.width = levelSizes[i]+'px';
		group.appendChild(col);
	}
	table.insertBefore(group, table.firstChild);
}

function extractLink(e){
	if(!e.hasAttribute('id')){
		throw 'Found an heading supposed to be inside the toc, but has no id';
	}
	return '#' + e.getAttribute('id');
}
function insertNumber(e, number){
	var span = document.createElement('span');
	span.classList.add('book-toc-index');
	span.appendChild(document.createTextNode(number));
	e.insertBefore(span, e.firstChild);
}
function makeLink(link, content){
	var l = document.createElement('a');
	l.setAttribute('href', link);
	if(content) l.appendChild(content);

	var cell = document.createElement('td');
	cell.appendChild(l);
	return cell;
}
function makeIndexString(levels, level){
	var result = '';
	for(var i=0;i<level;++i){
		result += levels[i] + '.';
	}
	return result + levels[level];
}
function updatePageNumbers(fragment, mapping){
	var items = fragment.querySelectorAll('.book-toc a[href]>.book-toc-page');
	var changed = false;
	var newSize = 0;
	for(var i=0; i<items.length; ++i){
		var link = items[i].parentNode;
		var dest = fragment.getElementById(link.getAttribute('href').substring(1));
		var span = items[i];
		if(dest){
			dest = mapping.get(dest);
			var newPageNum = getPageNumber(dest);
			if(span.textContent != newPageNum){
				changed = true;
				span.textContent = newPageNum;
				mapping.get(span).textContent = newPageNum;
			}
			var t = mapping.get(span).getBoundingClientRect().width + 2;
			if(t>newSize){
				newSize = t;
			}
		}
	}
	if(changed){
		var cols = fragment.querySelector('.book-toc>table>colgroup').children;
		var textCol = cols[cols.length - 2];
		var pageCol = cols[cols.length - 1];
		var pageSize = parseFloat(pageCol.style.width);
		var textSize = parseFloat(textCol.style.width);
		if(Math.abs(newSize - pageSize) > 0.01){
			pageCol.style.width = newSize + 'px';
			textCol.style.width = (textSize + pageSize - newSize) + 'px';
		}

	}
	return changed;
}
function getPageNumber(e){
	while(!e.classList.contains('book-page')){
		e = e.parentNode;
	}
	return e.getAttribute('data-book-page-number')|0;
}

window.addEventListener('load', layoutAll);            </script>
                <style>
                    .test-cases table {
                        page-break-inside: avoid;
                        border-collapse: collapse;
                        margin-bottom: 0.75cm;
                    }
                    .test-cases table tr:nth-child(odd)>td {
                        border: 1px solid #E0E0E0;
                        padding: 2px 8px;
                        text-align: left;
                    }
                    .test-cases table tr:nth-child(even)>td {
                        border: 1px solid #E0E0E0;
                        background-color: #F5F5F5;
                        padding: 2px 8px;
                    }
                </style>
            </head>
    <body>
		<h2 id="book-heading-1" class="book-no-toc">Software Engineering 2: PowerEnJoy</h2>

<h1 id="book-heading-2" class="book-no-toc" style="page-break-before:auto;">Integration Test Plan Document</h1>

<h3 id="book-heading-3" class="book-no-toc">Nardo Loris, Osio Alberto</h3>

<h4 id="book-heading-4" class="book-no-toc" style="page-break-after:always;">Politecnico di Milano</h4>

<div class="book-toc"></div>

<h1 id="book-heading-5">Introduction</h1>

<h2 id="book-heading-6">Revision history</h2>

<table>
<thead>
<tr>
  <th>Version</th>
  <th>Author</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1.0</td>
  <td>Nardo Loris - Osio Alberto</td>
  <td>Initial release</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-7">Purpose and scope</h2>

<p>This document describes the integration test plan for the PowerEnJoy car sharing management system. It aims at providing a detailed and exhaustive description of the steps involved in integration testing, along with entry condition and a description of test data.</p>

<p>Integration test is a very important activity as it aims at checking the communication between components, and in particular with components not actually developed by our company, as to verify that all the services implemented inside the various components actually fulfill the functional and non functional requirements.</p>

<p>This document is intended to be read mainly by developers and quality assurance team. In general, this document is to be read in the context described by the <em>Requirements Analysis and Specification Document</em> and by the <em>Design Document</em> written for this project.</p>

<h2 id="book-heading-8">Document structure</h2>

<p>The content of this document is mainly organized in four sections:</p>

<ul>
<li><strong>Integration strategy</strong> chapter provides detailed informations about the starting conditions required to begin integration testing, the approach chosen for integration, the components to be integrated and the integration sequence</li>
<li><strong>Individual steps and test description</strong> chapter provides informations about the tests to be performed in the different integration steps</li>
<li><strong>Tools and test equipment</strong> chapter deals with the tools that is planned to use in order to implement and run tests over the (partially) built system</li>
<li><strong>Program stubs and test data required</strong> chapter deals with the structure of the scaffolding to be developed in order to build a meaningful test environment</li>
</ul>

<h2 id="book-heading-9">Acronyms, abbreviations and definitions</h2>

<ul>
<li><strong>System</strong>: the system to be developed for PowerEnJoy</li>
<li><strong>User</strong>: a generic person interacting with the system</li>
<li><strong>Employee</strong>: a person who works for PowerEnJoy</li>
<li><strong>Actor</strong>: can refer to both users and employees</li>
<li><strong>Car</strong>: an electric vehicle owned by the company</li>
<li><strong>Bill</strong>: an amount of money a user has to pay. It is related to only a single ride</li>
<li><strong>Pending bill</strong>: a bill that the user has not paid yet</li>
<li><strong>Paid bill</strong>: a bill that the user has already paid for</li>
<li><strong>Area</strong>: a space delimited by a polygonal line whose vertices are a set of geographical coordinates</li>
<li><strong>Geographical coordinates</strong>: a tuple of latitute and longitude describing a location on Earth</li>
<li><strong>Geographical region</strong>: an area where a user can reserve at most one car. They do not overlap</li>
<li><strong>Safe area</strong>: an area where it is possible to park a car and optionally to recharge it, in order to make it available for another user</li>
<li><strong>Safe parking area</strong>: a special safe area where it is not possible to recharge the car</li>
<li><strong>Recharging station area</strong>: a special safe area where it is possible to plug the car for recharging its battery</li>
<li><strong>Registered user</strong>: a user who has completed the sign up process</li>
<li><strong>Logged user</strong>: a user who has completed the log in process and has not yet started the log out process</li>
<li><strong>Banned user</strong>: a registered user who cannot reserve a car until all his pending bills are estinguished</li>
<li><strong>Reservor user</strong>: the user who has made a reservation for the specific car. A user is considered the reservor user of a car until the reservation expires or the user is charged with the bill</li>
<li><strong>Available car</strong>: a locked car for which no reservation exists</li>
<li><strong>Reserved car</strong>: a locked car for which it exists a user who has reserved it</li>
<li><strong>Becoming available car</strong>: an unlocked car is said to be "becoming available" as soon as all the passengers and the driver of this car exits the car, the doors of the car are closed and it is parked in a safe area</li>
<li><strong>In maintenance car</strong>: a locked car is said to be "in maintenance" as soon as its battery level is below 20%, the car cannot be reserved</li>
<li><strong>In use car</strong>: an unlocked car which is not becoming available</li>
<li><strong>GPS</strong>: A system capable of providing the location of a receiver device with a good precision (5 meters)</li>
<li><strong>Overlapping areas</strong>: Two areas are said to be overlapping if there exists at least one geographical coordinates which is contained inside the two areas</li>
<li><strong>Expiration of a car reservation</strong>: when a reservation expires, the car becomes available again, the reservor user loses his reservation and he is charged a fee of 1€</li>
<li><strong>Percentage delta</strong>: a discount or a raise based on percentage</li>
<li><strong>Applying a raise</strong> or <strong>a discount</strong>: The operation of increasing or reducing the amount of a bill for a specific reason. The amount is computed just before the system charges the user of a bill, and then all those amounts (each one related to a specific reason) are algebraically added to the same bill.</li>
<li><strong>RASD</strong>: Requirements Analysis and Specification Document</li>
<li><strong>DBMS</strong>: DataBase Management System</li>
<li><strong>COTS</strong>: Commercial Off The Shelf</li>
</ul>

<h2 id="book-heading-10">Reference documents</h2>

<ul>
<li>The project description document</li>
<li>Requirement Analysis and Specification Document for PowerEnJoy car sharing system</li>
<li>Design Document for PowerEnJoy car sharing system</li>
<li>The Integration Test Plan Example document</li>
<li>Testing tools

<ul>
<li>Mock server: <a href="http://www.mock-server.com">http://www.mock-server.com</a></li>
<li>JUnit: <a href="http://junit.org/junit4">http://junit.org/junit4</a></li>
<li>Arquillian: <a href="http://arquillian.org">http://arquillian.org</a></li>
</ul></li>
</ul>

<h1 id="book-heading-11">Integration strategy</h1>

<h2 id="book-heading-12">Entry criteria</h2>

<p>This paragraph provides the criteria that have to be met in order to start the integration testing.</p>

<ul>
<li><p>Both the <em>Requirements Analysis and Specification Document</em> and the <em>Design Document</em> must be fully written and validated by the quality assurance team.</p></li>
<li><p>The single components that go under integration testing must have been developed at least for the 90% of the functionalities they have to provide, and the developed part must be fully unit tested (a coverage of 95% is required)</p></li>
<li><p>Drivers and stubs as of chapter 5.1 of this document have been fully developed</p></li>
<li><p>Integration testing can start only when the estimated
percentage of completion of every component with respect to its functionalities is:</p>

<ul>
<li>50% for <em>User Application</em> and <em>Employee Application</em></li>
<li>100% <em>Monitoring Controller</em>, <em>User Controller</em> and <em>Bill Controller</em></li>
<li>50% for <em>Router</em></li>
<li>80% for all other components</li>
</ul>

<p>Note that some components are required to be fully developed before integration testing starts because they are very basic components and are used by the majority of the other components. This reflects also the integration order defined by the strategy (see later).</p>

<p>The choice of requiring different completion percentages is taken in order to anticipate as much as possibile the begin of the integration testing, as to speed up the overall system development.</p></li>
</ul>

<h2 id="book-heading-13">Elements to be integrated</h2>

<p>This paragraph provides a list of the components that need to be integrated together.</p>

<p>As specified in the <em>Design Document</em>, the system is made up of five main components, that are:</p>

<ul>
<li>Server</li>
<li>User Application</li>
<li>Employee Application</li>
<li>DBMS</li>
<li>Car monitoring system</li>
</ul>

<p>These are the final, highest level components to be integrated together.</p>

<p>Before carrying out the full system integration, we must focus on lower level components. In particular, we have to focus on <em>server</em>, <em>user application</em> and <em>employee application</em>. The <em>DBMS</em> component is available as a COTS component, and thus it is a very well-known and well-tested component. The <em>car monitoring system</em> is provided by the manufacturer of the cars, and so the development and the testing of that component has not to be carried out by our company (we must test the integration at system level).</p>

<p>The most complex component is for sure the server component, which is made up of the integration of the following components:</p>

<ul>
<li>Router</li>
<li>Monitoring controller</li>
<li>Car controller</li>
<li>Reservation controller</li>
<li>Ride controller</li>
<li>User controller</li>
<li>Geographical areas controller</li>
<li>Safe areas controller</li>
<li>Bill controller</li>
</ul>

<p>In the context of the <em>server</em> component, we define 3 main subsystems:</p>

<ul>
<li><strong>Core Service Subsystem</strong>

<ul>
<li>Monitoring controller</li>
<li>Car controller</li>
<li>Reservation controller</li>
<li>Ride controller</li>
</ul></li>
<li><strong>Service Tuning Subsystem</strong>

<ul>
<li>Safe areas controller</li>
<li>Geographical areas controller</li>
</ul></li>
<li><strong>End user subsystem</strong>

<ul>
<li>User controller</li>
<li>Bill controller</li>
</ul></li>
</ul>

<p>The <em>router</em> cannot be included in any of those subsystem as it is unrelated with the functionalities those subsystems provide. It can only constitute a singleton subsystem.</p>

<p>The <em>User application</em> and the <em>Employee application</em> are not as complex as the server components as they represent only a user friendly interface that invokes the server APIs. In this context, integration testing is very limited because of the fact there is (almost) no interaction between subcomponents related to different APIs.</p>

<h2 id="book-heading-14">Integration testing strategy</h2>

<p>The approach used in integration testing is a bottom-up approach.</p>

<p>Bottom-up approach is chosen for these reasons:</p>

<ul>
<li>It reflects the development process and avoids developing stubs of very simple components as the effort spent in developing the stub would not be so minor than the effort spent in developing the actual component to get a real advantage.</li>
<li>Components like the <em>DBMS</em> or the <em>Car monitoring system</em>, which are bought from external companies, are immediatly available in a bottom-up approach without any explicit dependency</li>
<li>It exercises real components instead of stubs, allowing the development team to have more precise feedback also on non functional requirements already during the integration testing, and so to detect and correct issues earlier (if a non functional requirement is violated during the integration testing phase then it is extremely unlikely it won't be violated also during the system testing)</li>
</ul>

<h2 id="book-heading-15">Sequence of components / software integration</h2>

<p>This section provides detailed specification of the order in which components must be integrated.</p>

<h3 id="book-heading-16">Software integration</h3>

<p>This section describes the order of integration of subsystem to build a highest-level component. Because of already explained reasons we focus on the <em>server</em> component testing.</p>

<p>Stilistic notes:</p>

<ul>
<li>As we'll focus on one component at a time, that component will be highlighted in light grey.</li>
<li>External systems will be highlighted in yellow</li>
</ul>

<h4 id="book-heading-17">End user subsystem</h4>

<p>According to the bottom-up integration approach, the first subsystem to be integrated is the <em>end user subsystem</em>. It only depends on the DBMS as an external component.</p>

<p>First of all, we test the integration between the <em>DBMS</em> and the <em>bill controller</em>.</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT1.svg" alt="Alt IT1" /></p>

<p>Then, we must test the interaction with the external system for payment processing</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT2.svg" alt="Alt IT2" /></p>

<p>Then we can add the <em>user controller</em>, which depends primarly on the <em>DBMS</em> and on the <em>bill controller</em></p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT3.svg" alt="Alt IT3" /></p>

<p>Now we can focus on the interaction with the external components for driving licence validation</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT4.svg" alt="Alt IT4" /></p>

<p>This completes the customer subsystem, which, according to the DD, provides the basic functionalities for user authentication, user management and billing.</p>

<h4 id="book-heading-18">Service management subsystem</h4>

<p>Now we can perform integration testing on <em>service management subsystem</em>, that depends both on <em>DBMS</em> and <em>end user subsystem</em> (for user authentication and authorization).</p>

<p>The components of this subsystem are indipendent one from the other, so we can test integration of the two components with their dependencies separately.</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT5.svg" alt="Alt IT5" /></p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT6.svg" alt="Alt IT6" /></p>

<p>This subsystem provides functionalities related to the tuning of the service, such as geographical regions and safe areas management.</p>

<h4 id="book-heading-19">Core service subsystem</h4>

<p>This is the most complex subsystem, and it is the last in the integration order as it depends on both the privious subsystems, plus the <em>DBMS</em></p>

<p>First of all, we exercise the integration with the external system that monitors cars onboard.
We setup the message-driven architecture described in the DD integrating the broker</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT7.svg" alt="Alt IT7" /></p>

<p>and then adding the <em>car controller</em> which provides informations about cars to all other components, interacting on one side in the message-driven architecture and on the other side with the DMBS in order to persist collected information, the safe areas controller in order to detect whether a car is parked in a safe area or not, and the geographical region controller, in order to associate each car with the geographical region it is parked in.</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT8.svg" alt="Alt IT8" /></p>

<p>Now we can test integration of the two main business components. Due to the bottom-up approach and the dependency of reservations on rides, we must test first the integration of the <em>ride controller</em></p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT9.svg" alt="Alt IT9" /></p>

<p>Then the last component of this subsystem is the <em>reservation controller</em></p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT10.svg" alt="Alt IT10" /></p>

<h4 id="book-heading-20">Router</h4>

<p>The very last component to integrate is the <em>router</em>, which works on top of all the other subsystems and so can only be added as the very last component of the <em>server</em>. Components from different subsystems have different colors.</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/IT11.svg" alt="Alt IT11" /></p>

<h4 id="book-heading-21">Fully integrated <em>server</em> component</h4>

<p>Now we are ready to integrate all subcomponents to form the <em>server</em> high-level component (external dependencies are not included).</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/Server-subsys.svg" alt="Alt subsys" /></p>

<h3 id="book-heading-22">Components integration</h3>

<p>This paragraph provides informations about high-level component integration testing.</p>

<p>Due to the bottom-up approach, the first components that we are going to integrate are <em>server</em> and <em>DBMS</em>. The interaction between these two components has already been tested during the previous phase, when we verified all the interaction between the <em>DBMS</em> and a subcomponent of the <em>server</em></p>

<p>Then we add the <em>car monitoring system</em>, whose interaction with the server has already been verified, just like what happened with the <em>DBMS</em>.</p>

<p>We can now test in parallel the integration of <em>user application</em> with <em>server</em> and of <em>employee application</em> with <em>server</em>, has this two components have no interaction one with the other. This can also save time, as we can carry out the analysis in parallel.</p>

<p>Here we have a picture of the fully integrated system.</p>

<p><img src="http://localhost/powerenjoy/ITPD/images/global.svg" alt="Alt full" /></p>

<h1 id="book-heading-23">Individual steps and test description</h1>
<div class="test-cases">
<h2 id="book-heading-24">Integration test case I1</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I1T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Bill Controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a bill record will be created in the database.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>The amount and the date of a valid bill.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The database table must have a bill record.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I1T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Bill Controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that only valid bills will be stored into the database.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A non valid bill (past date, negative amount&hellip;).</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return an error, no record must be stored in the database.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I1T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Bill Controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that bills can be retrived for a specific user.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A user.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return all the bills for the user and no other bills.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-25">Integration test case I2</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I2T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>External payment processing system &rarr; Bill Controller, DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the bill controller communicates with the external payment processing system.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Non valid credit card data.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>An error must be returned.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I2T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>External payment processing system &rarr; Bill Controller, DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the bill controller communicates with the external payment processing system.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Valid credit card data.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The test completes without errors.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I2T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>External payment processing system &rarr; Bill Controller, DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the bill controller communicates with the external payment processing system.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Valid credit card data, bill.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The payment must be processed.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I2T1</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I2T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>External payment processing system &rarr; Bill Controller, DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the bill controller communicates with the external payment processing system.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Non valid credit card data (CVV non correct, non existing credit card number), valid bill.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The payment must be rejected, and an error must be returned.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I2T1</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-26">Integration test case I3</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I3T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>User Controller &rarr; DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a user record is created for a user.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A user.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The database table must have a user record.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I3T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>User Controller &rarr; DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a user record is not created for a non valid user or for a valid user whose username is already in the database.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A non valid user.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>Must return an error, no modification to the database must be performed.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I3T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>User Controller &rarr; DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a user or an employee can be authenticated.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>The username and the password for a valid account.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return a valid authentication token.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I3T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>User Controller &rarr; DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a user or an employee can be authenticated.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>The username and the password for a non valid account.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return an error, the error must not contain information regarding which field is not valid.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I3T5</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>User Controller &rarr; DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a user having a pending bill is banned.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A user, a bill for the user which is pending.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The user must be banned.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-27">Integration test case I4</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I4T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>External driving licence validation service &rarr; User Controller,  DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that ensures that this component is able to communicate with the external driving licence validation service.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some user data with valid and driving licence.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>User is inserted in the database</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I4T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>External driving licence validation service &rarr; User Controller,  DBMS, Bill Controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that ensures that this component is able to communicate with the external driving licence validation service.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some user data with non valid driving licence (non existing driving licence number, outdated driving licence number).</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>No operation is performed on the database</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-28">Integration test case I5</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I5T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Geographical areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the merge operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Two regions.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The two region must be merged, the database must reflect this change, hence it must not contain the input region and must contain a new region which is the union of the two.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I5T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Geographical areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the split operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A region and a path within the region.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The region is split using the path and the database must reflect this change, hence it must not contain the input region and must contain two regions whose union corresponds to the input region, and that have as a part of their boundary the given path</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I5T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Geographical areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the split operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A region and a path outside the region.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>No operation must be performed, an error must be returned.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I5T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Geographical areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the search operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A position and a radius.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return all and only the regions whose polygon intersects a circle centered in the given position with the given radius.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-29">Integration test case I6</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I6T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Safe areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the remove operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A safe area.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The safe area must be removed from the database.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I6T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Safe areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the add operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Data to create a valid safe area.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>A new safe area must be inserted in the database.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I6T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Safe areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the add operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Data to create a safe area that overlaps with another, already existing, safe area.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>No operation must be performed, an error must be returned.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I6T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Safe areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the edit operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Valid data to update a safe area.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The old safe area is updated and the changes are stored in the database.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I6T2</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I6T5</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Safe areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the edit operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Non valid data to update a safe area (open boundary, negative number of plugs for recharging stations, &hellip;).</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>No operation must be performed, an error must be returned.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I6T3</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I6T6</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Safe areas controller &rarr; DBMS</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the search operation behaves correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A position and a radius.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return all the safe areas whose polygon intersects a circle centered in the given position with the given radius.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-30">Integration test case I7</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I7T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car monitoring system &rarr; Monitoring controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the StatusMessage is received.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>The StatusMessage from the car.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The StatusMessage is received and dispatched.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I7T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car monitoring system &rarr; Monitoring controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the Unlock message is received by the car.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>The car to which the message is to be delivered.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The car must perform all the action necessary to unlock itself.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I7T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car monitoring system &rarr; Monitoring controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the Lock message is received by the car.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>The car to which the message is to be delivered.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The car must perform all the action necessary to lock itself.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-31">Integration test case I8</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I8T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car controller &rarr; Monitoring controller, DBMS, Safe areas controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that only available cars can be reserved.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some cars to be reserved (this test must be run several times, sometimes use an available car, some other times use a non available one).</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>Only available cars must be reserved.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I8T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car controller &rarr; Monitoring controller, DBMS, Safe areas controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that low battery cars are put in maintenance.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A StatusMessage reporting a low (&lt; 20%) battery level and the car parked somewhere.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The car sending the message must be put in maintenence.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I8T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car controller &rarr; Monitoring controller, DBMS, Safe areas controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that when a maintanance car has a battery level above 20% is put into the available cars.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A StatusMessage reporting a battery  level above 20%.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The car must be put into the available cars.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I8T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car controller &rarr; Monitoring controller, DBMS, Safe areas controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that only reserved car can be put in use.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some MessageStatus reporting a InUse status and the cars sending them.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>Only reserved cars must be put in use.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I8T5</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car controller &rarr; Monitoring controller, DBMS, Safe areas controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that only in use car can be put in available status.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some MessageStatus reporting a InUse status, with engine turned off and the cars sending them.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>Only in use cars whose position is inside a safe area must be put in the available status, its geographical area must be updated accordingly.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-32">Integration test case I9</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I9T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Ride Controller &rarr; Monitoring controller, DBMS, Safe areas controller, Car controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the ride controller terminates the ride after a car is parked in a safe area.</td>
</tr>
<tr>
  <td><p><strong>Input specification</strong></p>
</td>
  <td><p>A sequence of StatusMessage reporting:</p>

<ul>
<li>a car in use.</li>
<li>the same car parked in a safe area.</li>
</ul>
</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>A bill must be processed and the ride removed.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I9T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Ride Controller &rarr; Monitoring controller, DBMS, Safe areas controller, Car controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the ride controller computes a correct price for the ride.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some sequences of StatusMessage reporting a car in use, some StatusMessages that triggers either a single discount or a single raise and the StatusMessage reporting the car parked (if not already present).</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The bill amount must be compatible with the raise or the discount applied.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I9T1</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I9T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Ride Controller &rarr; Monitoring controller, DBMS, Safe areas controller, Car controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the ride controller computes a correct price for the ride.</td>
</tr>
<tr>
  <td><p><strong>Input specification</strong></p>
</td>
  <td><p>A sequence of StatusMessage reporting:</p>

<ul>
<li>a car in use by a single person.</li>
<li>the same car in use by 3 passengers.</li>
<li>the same car parked in a safe area.</li>
</ul>
</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The bill amount must not include any discount based on the number of passengers.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I9T2</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I9T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Ride Controller &rarr; Monitoring controller, DBMS, Safe areas controller, Car controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the ride controller computes a correct price for the ride.</td>
</tr>
<tr>
  <td><p><strong>Input specification</strong></p>
</td>
  <td><p>A sequence of StatusMessage reporting:</p>

<ul>
<li>a car in use by 2 passengers.</li>
<li>the same car parked in a safe recharging area.</li>
<li>the same car in recharge.</li>
</ul>
</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The bill amount must be compatible with multiple discount applied.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I9T2</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-33">Integration test case I10</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I10T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Reservations controller &rarr; DBMS, Car controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a reservation is created in response to a request.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A valid car and a user who wants to serve the car.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>A new reservation record must be created, the car must be in reserved status.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I10T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Reservations controller &rarr; DBMS, Car controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a reservation is not made if there is already a reservation in the same geographical area.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A car and a user who wants to reserve the car, the user has already a reservation in the same geographical area.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>An error must be returned, no operation must be performed.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I10T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Reservations controller &rarr; DBMS, Car controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that only available cars can generate a reservation record.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A car which is not available, and a user who wants to reserve that car.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>An error must be returned, no operation must be performed.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I10T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Reservations controller &rarr; DBMS, Car controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a reservation can trigger an expiration, for the purpose of this test the expiration may be set to a time interval different from the production one (1 hour)</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A car and a user who wants to reserve the car.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>After the defined time interval, the reservation must be removed, a bill must be processed for a 1€ fee.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I10T1</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I10T5</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Reservations controller &rarr; DBMS, Car controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the controller is able to get all the cars near a position.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some position, radius and the status of the car to search for.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return all the cars with the given status at most radius meter distant from the given position.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I10T6</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Car controller &rarr; Monitoring controller, DBMS, Safe areas controller, Geographical areas controller</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that the geocoding of an address is done correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some location, radius and the status of the car to search for.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>It must return all the cars with the given status at most radius meter distant from the given location.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I10T5</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-34">Integration test case I11</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I11T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Router &rarr; all the components of the server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that requests are routed correctly.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some request for different services.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The corresponding controller is actived with the data received in the request.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I11T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Router &rarr; all the components of the server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that a request to a non existent controller method fails gracefully.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A request for which no controller method is associated.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>An error must be returned.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I11T3</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Router &rarr; all the components of the server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that requests for employee services are granted only to employees.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A request issued by a user for an employee service.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>An error must be returned.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I11T1</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>I11T4</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Router &rarr; all the components of the server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that requests for user services are granted only to users.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>A request issued by an employee for a user service.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>An error must be returned.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>I11T1</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-35">Integration test case SI1</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>SI1T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Router &rarr; all the components of the server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that requests can be processed fast enough to meet our performance requirements.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Multiple concurrent request.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>Request must be processed within the time specified in the performance requirements.</td>
</tr>
</tbody>
</table>

<h2 id="book-heading-36">Integration test case SI2</h2>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>SI2T1</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Web browser &rarr; Web server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that web request are correctly processed.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Some HTTPS request issued by the web browser.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>The correct page is displayed.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr>
  <td><strong>Test case identifier</strong></td>
  <td>SI2T2</td>
</tr>
<tr>
  <td><strong>Test items</strong></td>
  <td>Web browser &rarr; Web server</td>
</tr>
<tr>
  <td><strong>Test description</strong></td>
  <td>This test ensures that web requests can be processed fast enough to meet our performance requirements.</td>
</tr>
<tr>
  <td><strong>Input specification</strong></td>
  <td>Multiple concurrent HTTPS request.</td>
</tr>
<tr>
  <td><strong>Output specification</strong></td>
  <td>Request must be processed within the time specified in the performance requirements.</td>
</tr>
<tr>
  <td><strong>Test dependencies</strong></td>
  <td>SI2T1</td>
</tr>
</tbody>
</table>
</div>
<h1 id="book-heading-37">Tools and Test equipment required</h1>

<h2 id="book-heading-38">Tools</h2>

<p>One of the main desirabe characteristic of a set of test cases is that it can be run automatically. This is also helpful after system deploying in order to verify that maintanance operations and modifications do not break interaction between components.
In order to achieve this goal, two main tools are going to be uses: <strong>JUnit framework</strong> and <strong>Arquillian testing framework</strong>.</p>

<ul>
<li><p><strong>JUnit</strong><br />
Even if JUnit has been historically designed in order to automate Unit Testing, it can come very handy also during integration testing, as it can automate the execution of methods as of the developed drivers (that are to be integrated with JUnit), verify responses against a oracle and check that appropriate exceptions are raised in the expected cases (according to the specification). This tool provides a common base upon which drivers are built, so as to fully automate test lifecycle (except for test definition, which is stated in this document).</p></li>
<li><p><strong>Arquillian testing framework</strong><br />
This framework comes very handy in executing container-level tasks in Java EE. In particular, these kind of test concerns mainly the interaction with the <em>DBMS</em> (because many low-level interactions with the DBMS are actually performed by the Java EE containers, and so we need to check they interact properly with business components) and the testing of dependency injection (which is widely used between components that need instances of other components). Moreover, this framework also helps in creating partial builds of the system, which is used in bottom up integration, when different components are included one at a time. This is accomplished by the <em>micro-deployment</em> created in a programmable way with Arquillian.</p></li>
</ul>

<p>Not all tests can however be automated, for example GUI related components cannot be completely tested in a automatic way. Another tool is then required, and it is <strong>manual testing</strong>. This tool has the great disadvantage of not being automatically reproducible, but it is the only viable tool to test some features of the application. Moreover, the intire activity of designing the test suit and implement the proper drivers and oracles has to be carried out manually.</p>

<p>During the integration of the system it may happen that some interactions are tested and then used during other tests. When this interactions involve external services, they must be tested against the real service in the dedicated tests, but then external services should be mocked in order to avoid to query them uselessly. A tool that grants this possibility is <span style="font-weight: bolder;">mock server</span>.</p>

<p>In order to test <em>user application</em> and <em>employee application</em> interaction with the server component, the <strong>Chrome developer tools</strong> may come very useful, as they provide functions to inspect both web requests and responses and interal components' state (other web browsers provide similar tools, but this is the most complete and flexible tool, according to developer's experience). Because of the fact that this needs to be a cross-browser application, it should be tested on all the major modern browsers, which include:</p>

<ul>
<li>Google Chrome</li>
<li>Mozilla Firefox</li>
<li>Safari</li>
<li>Opera browser</li>
<li>Micorsoft Edge</li>
<li>Google Chrome for Android</li>
<li>Mobile Safari</li>
<li>Android Browser</li>
<li>Android WebView</li>
<li>IE Phone</li>
<li>Opera Mobile</li>
<li>Firefox Mobile</li>
</ul>

<p>Mobile versions of major desktop browsers can also be tested through the emulator provided by the desktop version.</p>

<h2 id="book-heading-39">Test equipment</h2>

<p>A complete test equiment is composed of devices on which the different components can be deloyed.</p>

<p>In order to deploy the <em>server</em> component, a complete J2EE server infrastructure is needed. A draft for this infrastructure is composed of:</p>

<ul>
<li><strong>GlassFish Java Application server</strong></li>
<li><strong>Java Enterprise Edition</strong> runtime</li>
<li><strong>GlassFish Message Broker</strong> (in order to setup the message-driven part of the overall architecture)</li>
</ul>

<p>The <em>DBMS</em>, in order to mimic the real deployment scenario, should be constituted by an instance of <strong>MySQL</strong> deployed on a dedicated machine.</p>

<p>The <em>monitoring system</em> is deployed on board of the cars, thus at least one car of the PowerEnJoy company is needed (unless the car manufacturer provides a reliable stub of the real system for testing purposes)</p>

<p>The <em>user application</em> and the <em>employee application</em> are web application, and so they run in the context of a browser. The only hardware needed to test them is a normal notebook, plus a set of mobile devices or emulators in order to test system agaist mobile browsers. No particular screen resolution is required, and more different screen resolutions should be tested, in order to check the reactivity of the design, in particular with respect to very large or very small devices. Clearly, an instance of each of the browsers listed in the previous paragraph is needed.</p>

<h2 id="book-heading-40">Program stubs and drivers</h2>

<p>In order to actually perform the integration testing, and then to run tests, a number of drivers and stubs is generally needed. Drivers and stubs, in order to invoke methods and emulate components, will work in the context of the <strong>JUnit</strong> framework.</p>

<h3 id="book-heading-41">Stubs</h3>

<p>Due to the <em>bottom up</em> integration approach, no stub should be required by the testing activity, as system is built from the most simple components up. By the way, as components involved in client-server interaction are mutually coupled, a number of stubs will also be required in order to emulate the behaviour of a component receiving a response. In particular, only one stub component, with the very simple function of logging the response received from the server should be used until <em>user application</em> and <em>employee application</em> are fully developed and unit tested.</p>

<h3 id="book-heading-42">Drivers</h3>

<p>Drivers are a very key point in <em>bottom up</em> integration testing, as they responsible of trigger actions (and then interactions) in components, and this actually drives the test.<br />
Here is a list of all the drivers that will be developed in order to carry out the integration testing phase.</p>

<ul>
<li><p><strong>Bill driver</strong><br />
This driver calls the methods exposed by the <em>bill controller</em> component in order to test its integration with the <em>DBMS</em></p></li>
<li><p><strong>User driver</strong><br />
This driver calls the methods exposed by the <em>user controller</em> in order to test its integration with the <em>bill controller</em> and the <em>DBMS</em>.</p></li>
<li><p><strong>Geographical areas driver</strong><br />
This driver calls the methods exposed by the <em>geographical areas controller</em>, in order to test the integration with <em>DBMS</em> and <em>user controller</em>. Due to the intrensic complexity of some algorithms used inside the <em>geographical areas controller</em>, particular attenction should be put to test that the communication with other modules works correctly.</p></li>
<li><p><strong>Safe areas driver</strong><br />
This driver calls the methods exposed by the <em>safe areas controller</em> in rder to test the interaction with the <em>user controller</em> and the <em>DBMS</em>.</p></li>
<li><p><strong>Monitoring controller driver</strong><br />
This driver calls the methods exposed by the <em>monitoring controller</em> in order to test its interaction with the external <em>car monitoring system</em> component. This driver is a very key point in integration testing, both because the driven components directly interacts with an external component, and because that external component is supposed to be deployed on cars, and so the interaction over a mobile network must be checked very carefully.</p></li>
<li><p><strong>Car controller driver</strong><br />
This driver calls the methods exposed by the <em>car controller</em> component, in order to test the interaction with the <em>monitoring controller</em> and the <em>DBMS</em></p></li>
<li><p><strong>Ride controller driver</strong><br />
This driver calls the method exposed by the <em>ride controller</em> component, in order to test the integration with <em>monitoring controller</em>, <em>user controller</em>, <em>bill controller</em>, <em>DBMS</em> and <em>safe areas controller</em></p></li>
<li><p><strong>Reservation controller driver</strong><br />
This driver calls the method exposed by the <em>reservation controller</em> component, in order to test the integration with <em>ride controller</em>, <em>user controller</em>, <em>bill controller</em>, <em>DBMS</em> and <em>geographical areas controller</em></p></li>
<li><p><strong>Router driver</strong><br />
This driver calls the methods exposed by the <em>router</em> component, in order to test the external public API provided by the system, which is composed of functions exposed by the <em>user controller</em>, the <em>reservation controller</em>, the <em>safe areas controller</em> and the <em>geographical areas controller</em></p></li>
<li><p><strong>Client application driver</strong><br />
This driver emulates the requests of both <em>user application</em> and <em>employee application</em>. This is possible because both use the same communication technology (HTTPS protocol). In particular, it sends requests to the public server API, and works together with the <em>client stub</em> mentioned in the previous paragraph to check correctness of server responses.</p></li>
</ul>

<h1 id="book-heading-43">Appendix</h1>

<h2 id="book-heading-44">Effort spent</h2>

<ul>
<li>Nardo Loris: 8 hours</li>
<li>Osio Alberto: 11 hours</li>
</ul>
    </body>
</html>
